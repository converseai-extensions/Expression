/**
 * @file simple_expression.js
 * @author graeme@converse.ai
 * @description Evaluate a one line expression. E.g. `1 + 2` will
 * return 3.
 *
 * Generated by the converse-cli tool for use with the Converse AI
 * Plugins SDK. https://developers.converse.ai/
 */

'use strict';

const Status          = require('@converseai/plugins-sdk').Status;
const ModuleResponse  = require('@converseai/plugins-sdk').Payloads.ModuleResponse;
const evaluate        = require('../lib/evaluate');

module.exports = function simple_expression (app, body) {
  /** @type {String} input The expression to evaluate.  */
  var input = body.payload.moduleParam.input;

  if (input !== undefined) {
    /** @type {ModuleResponse} response The Converse AI response to respond with. */
    var response = new ModuleResponse();
    response.setValue({result: evaluate(input)});
    app.send(Status.SUCCESS, response);
  } else {
    app.fail({ httpStatus: 400, code: 'REQUIRED_PARAMS_UNDEFINED', description: 'Required parameters are undefined.' });
  }
};
